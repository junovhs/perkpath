<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>PerkPath by TravelPerks</title>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
            rel="stylesheet"
        />
    </head>
    <body>
        <div class="app">
            <aside class="sidebar">
                <header class="sidebar-header">
                    <h1>Perk<span class="accent">Path</span></h1>
                    <p class="tagline">Itinerary &rarr; Prompt &rarr; JSON &rarr; Map</p>
                </header>

                <nav class="tabs">
                    <button class="tab active" data-tab="input">1. Input</button>
                    <button class="tab" data-tab="prompt">2. Prompt</button>
                    <button class="tab" data-tab="render">3. Render</button>
                    <button class="tab" data-tab="config">Config</button>
                </nav>

                <section class="tab-content active" data-tab="input">
                    <div class="panel">
                        <h2>Paste Your Itinerary</h2>
                        <textarea
                            id="itineraryInput"
                            placeholder="Part 1: South Africa, Victoria Falls, & Nairobi..."
                        ></textarea>
                        <button id="generatePrompt" class="primary-btn">
                            Generate AI Prompt &rarr;
                        </button>
                    </div>
                </section>

                <section class="tab-content" data-tab="prompt">
                    <div class="panel">
                        <h2>Copy This Prompt to AI</h2>
                        <div class="prompt-output" id="promptOutput">
                            <span class="placeholder">Enter itinerary text first...</span>
                        </div>
                        <button id="copyPrompt" class="primary-btn" disabled>
                            Copy to Clipboard
                        </button>
                        <p class="hint">
                            Paste this to Claude, ChatGPT, etc. Then paste the JSON response in the
                            Render tab.
                        </p>
                    </div>
                </section>

                <section class="tab-content" data-tab="render">
                    <div class="panel compact">
                        <h2>View Options</h2>
                        <div class="checkbox-grid">
                            <label><input type="checkbox" id="showBase" checked> Base Map</label>
                            <label><input type="checkbox" id="showRoutes" checked> Routes</label>
                            <label><input type="checkbox" id="showNodes" checked> Nodes</label>
                            <label><input type="checkbox" id="showLabels" checked> Labels</label>
                            <label><input type="checkbox" id="showArrows" checked> Arrows</label>
                        </div>
                    </div>

                    <div class="panel">
                        <h2>Paste AI Response (JSON)</h2>
                        <textarea
                            id="jsonInput"
                            placeholder='{ "title": "My Trip", "locations": [...], "segments": [...] }'
                        ></textarea>
                        <button id="renderMap" class="primary-btn">Render Map</button>
                        <button id="loadExample" class="secondary-btn small">Load Example</button>
                    </div>

                    <div class="panel compact">
                        <h2>Export (High Res)</h2>
                        <div class="button-grid">
                            <button class="export-btn" data-export="full">Full Map</button>
                            <button class="export-btn" data-export="base">Base Only</button>
                            <button class="export-btn" data-export="labels">Labels Only</button>
                            <button class="export-btn" data-export="routes">Routes Only</button>
                        </div>
                    </div>

                    <div class="panel compact">
                        <h2>Saved Views</h2>
                        <div class="button-row">
                            <button id="saveView" class="secondary-btn">Save View</button>
                            <button id="importView" class="secondary-btn">Import</button>
                        </div>
                        <input type="file" id="viewFileInput" accept=".json" style="display:none" />
                        <div id="savedViewsList" class="saved-views-list"></div>
                    </div>
                </section>

                <section class="tab-content" data-tab="config">
                    <div class="panel">
                        <h2>Color Theme</h2>
                        <select id="colorPreset" class="full-width">
                            <option value="standard">Standard</option>
                            <option value="ocean">Ocean</option>
                            <option value="earth">Earth</option>
                            <option value="sunset">Sunset</option>
                        </select>
                    </div>

                    <div class="panel">
                        <h2>Route Types</h2>
                        <div id="routeTypes" class="route-types-compact"></div>
                    </div>

                    <div class="panel">
                        <h2>Labels</h2>
                        <div class="config-row">
                            <label>Size</label>
                            <input type="range" id="labelFontSize" value="14" min="8" max="32" step="1" />
                            <span id="labelFontSizeValue">14px</span>
                        </div>
                        <div class="config-row">
                            <label>Background</label>
                            <input type="color" id="labelBgColor" value="#ffffff" />
                        </div>
                        <div class="config-row">
                            <label>Text</label>
                            <input type="color" id="labelTextColor" value="#1a1d23" />
                        </div>
                    </div>

                    <div class="panel">
                        <h2>Nodes & Arrows</h2>
                        <div class="config-row">
                            <label>Node Size</label>
                            <input type="number" id="nodeSize" value="12" min="6" max="24" />
                        </div>
                        <div class="config-row">
                            <label>Arrow Size</label>
                            <input type="number" id="arrowSize" value="20" min="10" max="50" />
                        </div>
                    </div>

                    <div class="panel">
                        <h2>Legend</h2>
                        <div class="config-row">
                            <label>Scale</label>
                            <input type="range" id="legendScale" value="1" min="0.5" max="2" step="0.1" />
                            <span id="legendScaleValue">1.0x</span>
                        </div>
                    </div>
                </section>
            </aside>

            <main class="map-container">
                <div id="map"></div>
                <div id="legend" class="legend">
                    <h3>Legend</h3>
                    <div id="legendItems"></div>
                </div>
                <div id="toast" class="toast"></div>
            </main>
        </div>
        <script type="module" src="/src/main.ts"></script>
    </body>
</html>